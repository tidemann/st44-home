<div
  class="task-card"
  [class.completed]="completed()"
  [class.overdue]="isOverdue()"
  [class.clickable]="clickable()"
  (click)="onCardClick()"
  (keydown)="onKeyDown($event)"
  [attr.tabindex]="clickable() ? '0' : null"
  [attr.role]="clickable() ? 'button' : null"
  [attr.aria-label]="clickable() ? 'Edit ' + taskName() : null"
>
  <!-- Complete Button -->
  @if (showCompleteButton() && !completed()) {
    <button
      class="task-complete-btn"
      (click)="onCompleteClick($event)"
      [attr.aria-label]="'Mark ' + taskName() + ' as complete'"
      type="button"
    >
      <span class="checkmark">âœ“</span>
    </button>
  }

  <!-- Task Info -->
  <div class="task-info">
    <h3 class="task-title">{{ taskName() }}</h3>
    <div class="task-meta">
      @if (metaText()) {
        <span
          class="task-meta-text"
          [class.status-overdue]="isOverdue()"
          [class.status-completed]="completed()"
        >
          @if (!isAssignment()) {
            <span class="icon">ğŸ”„</span>
          }
          {{ metaText() }}
        </span>
      }
    </div>
  </div>

  <!-- Points Badge -->
  @if (taskPoints() !== undefined) {
    <div class="task-badge">
      <span class="icon">â­</span>
      <span class="points">{{ taskPoints() }}</span>
    </div>
  }

  <!-- Reassign Button (for assignments only) -->
  @if (showReassignButton() && isAssignment() && !completed()) {
    <button
      class="task-reassign-btn"
      (click)="onReassignClick($event)"
      [attr.aria-label]="'Reassign ' + taskName()"
      type="button"
      title="Reassign to another child"
    >
      <span class="reassign-icon">ğŸ”„</span>
    </button>
  }
</div>
