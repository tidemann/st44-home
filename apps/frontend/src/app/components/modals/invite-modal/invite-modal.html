<app-modal [open]="open()" (closeModal)="onClose()" title="Invite Family Member">
  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label class="form-label" for="invite-email">Email Address *</label>
      <input
        type="email"
        id="invite-email"
        class="form-input"
        formControlName="email"
        placeholder="family@example.com"
        [class.error]="form.controls.email.invalid && form.controls.email.touched"
      />
      @if (form.controls.email.invalid && form.controls.email.touched) {
        <div class="form-error">
          @if (form.controls.email.errors?.['required']) {
            Email address is required
          }
          @if (form.controls.email.errors?.['email']) {
            Please enter a valid email address
          }
        </div>
      }
    </div>

    <div class="form-group">
      <label class="form-label" for="invite-role">Role *</label>
      <select
        id="invite-role"
        class="form-select"
        formControlName="role"
        [class.error]="form.controls.role.invalid && form.controls.role.touched"
      >
        @for (option of roleOptions; track option.value) {
          <option [value]="option.value">{{ option.label }}</option>
        }
      </select>
      <div class="role-description">
        @if (form.value.role === 'parent') {
          Can manage tasks, children, and settings
        } @else {
          Can view and complete tasks
        }
      </div>
    </div>

    <div class="form-group">
      <label class="form-label" for="invite-message">Personal Message (Optional)</label>
      <textarea
        id="invite-message"
        class="form-textarea"
        formControlName="message"
        placeholder="Join our household to help manage tasks together!"
        rows="3"
      ></textarea>
    </div>

    <div class="modal-actions" modal-actions>
      <button type="button" class="btn btn-secondary" (click)="onCancel()">Cancel</button>
      <button type="submit" class="btn btn-primary" [disabled]="form.invalid || submitting()">
        Send Invite
      </button>
    </div>
  </form>
</app-modal>
