<div class="week-comparison" role="region" aria-label="Ukessammenligning">
  <h3 class="comparison-title" i18n="@@weekComparison.title">Denne uken vs forrige uke</h3>

  <div class="comparison-grid">
    <!-- This Week -->
    <div class="period-card current">
      <span class="period-label" i18n="@@weekComparison.thisWeek">Denne uken</span>
      <span class="period-value">{{ currentRate() }}%</span>
      <span class="period-sublabel" i18n="@@weekComparison.tasksCompleted">
        {{ comparison().current.completedTasks }}/{{ comparison().current.totalTasks }} oppgaver
      </span>
    </div>

    <!-- Trend Indicator -->
    <div
      class="trend-indicator"
      [class.improved]="isImproved()"
      [class.declined]="isDeclined()"
      [attr.aria-label]="trendMessage()"
    >
      <span class="trend-arrow">{{ trendArrow() }}</span>
      <span class="trend-change">{{ rateChange() > 0 ? '+' : '' }}{{ rateChange() }}%</span>
    </div>

    <!-- Last Week -->
    <div class="period-card previous">
      <span class="period-label" i18n="@@weekComparison.lastWeek">Forrige uke</span>
      <span class="period-value">{{ previousRate() }}%</span>
      <span class="period-sublabel" i18n="@@weekComparison.tasksCompletedPrevious">
        {{ comparison().previous.completedTasks }}/{{ comparison().previous.totalTasks }} oppgaver
      </span>
    </div>
  </div>

  <!-- Points Change -->
  <div class="points-change">
    <span class="points-label" i18n="@@weekComparison.pointsThisWeek">Poeng denne uken:</span>
    <span class="points-value">{{ comparison().current.totalPoints }}</span>
    @if (pointsChange() !== 0) {
      <span
        class="points-delta"
        [class.positive]="pointsChange() > 0"
        i18n="@@weekComparison.pointsDelta"
      >
        ({{ pointsChange() > 0 ? '+' : '' }}{{ pointsChange() }} fra forrige uke)
      </span>
    }
  </div>
</div>
