<div class="layout-container">
  <!-- Sidebar Navigation (Desktop) -->
  <div class="sidebar-container">
    <app-sidebar-nav
      [activeScreen]="activeScreen()"
      [user]="sidebarUser()"
      (navigate)="onNavigate($event)"
      (addTask)="openCreateTask()"
      (settings)="onSettings()"
    />
  </div>

  <!-- Main Content Area -->
  <div class="main-content">
    <!-- Mobile Header (Mobile only) -->
    <header class="mobile-header">
      <div class="mobile-header-content">
        <div class="mobile-logo">Diddit!</div>
        <div class="mobile-header-actions">
          <app-household-switcher />
          <button
            type="button"
            class="settings-btn"
            (click)="onSettings()"
            aria-label="Open settings"
          >
            ⚙️
          </button>
        </div>
      </div>
    </header>

    <!-- Router Outlet for Page Content -->
    <router-outlet />

    <!-- Bottom Navigation (Mobile) -->
    <div class="bottom-nav-container">
      <app-bottom-nav [activeScreen]="activeScreen()" (navigate)="onNavigate($event)" />
    </div>

    <!-- FAB Button (Mobile only) -->
    <button class="fab" (click)="openCreateTask()" aria-label="Add new task">+</button>
  </div>

  <!-- Task Form Modal (Create mode) -->
  @if (householdId()) {
    <app-task-form-modal
      [open]="createTaskOpen()"
      mode="create"
      [householdId]="householdId()!"
      [children]="children()"
      (closeRequested)="closeCreateTask()"
      (formSubmitted)="onTaskFormSubmit($event)"
    />
  }
</div>
