<div class="task-list-container">
  <h1>Tasks</h1>

  @if (errorMessage()) {
    <div class="error">{{ errorMessage() }}</div>
  }

  @if (isLoading()) {
    <div class="loading">Loading tasks...</div>
  } @else {
    @if (tasks().length === 0) {
      <div class="no-data">No tasks</div>
    } @else {
      <div class="tasks">
        @for (task of tasks(); track task.id) {
          <div class="task-item">
            <div class="task-info">
              <h3>{{ task.name }}</h3>
              <p>{{ task.description }}</p>
              <div class="task-meta">
                <span>Points: {{ task.points }}</span>
                <span>Type: {{ task.ruleType }}</span>
              </div>
            </div>
            <div class="task-actions">
              <button type="button" (click)="openEditForm(task)">Edit</button>
              <button type="button" class="delete" (click)="deleteTask(task)">Delete</button>
            </div>
          </div>
        }
      </div>
    }
  }

  <button type="button" class="create-button" (click)="openCreateForm()">Add Task</button>

  @if (showTaskForm()) {
    <app-task-form [householdId]="householdId()" [task]="editingTask()" (formClose)="closeForm()" />
  }
</div>
